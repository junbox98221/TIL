# defer, async 스크립트

> 출처 [모던 JavaScript 튜토리얼](https://ko.javascript.info/)을 보고 정리한 내용입니다.

웹페이지에 카카오맵을 띄우기 위해 script 태그를 사용하는데 async=true 속성을 주는 예시를 찾아서 이게 어떤 용도인지 학습해보자.

브라우저는 HTML을 읽다가 <script></script> 태그를 만나면 스크립트를 먼저 실행해야 하기 때문에 DOM생성을 멈춘다.

src 속성이 있는 <script src="..."></script> 태그의 경우에도 마찬가지로 외부에서 스크립트를 다운받고 실행한 후에 남은 페이지를 처리한다.

이런 브라우저의 동작 방식은

-   스크립트에서 스크립트 아래에 있는 DOM요소에 접근할 수 없다. 따라서 DOM 요소에 핸들러를 추가하는 것과 같은 행위가 불가하다. ex)

```
<p>...스크립트 앞 콘텐츠...</p>

<script src="https://javascript.info/article/script-async-defer/long.js?speed=1"></script>

<!-- 스크립트 다운로드 및 실행이 끝나기 전까지 아래 내용이 보이지 않습니다. -->
<p>...스크립트 뒤 콘텐츠...</p>
```

-   페이지 위쪽에 용량이 큰 스크립트가 있으면 해당 스크립트를 다운받고 실행할 때까지 아래 페이지를 볼 수 없다.

## defer

브라우저는 defer 속성이 있는 스크립트는 '백그라운드'에서 다운로드한다. 따라서 스크립트를 다운로드 하는 도중에도 HTML 파싱이 멈추지 않고 스크립트 실행은 페이지 구성일 끝날 떄까지 **지연** 된다.

## async

asnyc속성이 붙은 스크립트는 페이지와 독립적으로 동작하고 defer와 마찬가지로 백그라운드에서 다운로드된다. 따라서 HTML 페이지는 async 스크립트 다운이 완료되길 기다리지 않고 페이지 내 콘텐츠를 처리, 출력한다.(하지만 asny 스크립트 실행 중에는 파싱이 멈춘다.)
