# μ„ν¬λ§µκ³Ό μ„ν¬μ…‹

> μ¶μ² [λ¨λ JavaScript νν† λ¦¬μ–Ό](https://ko.javascript.info/)μ„ λ³΄κ³  μ •λ¦¬ν• λ‚΄μ©μ…λ‹λ‹¤.

κ°€λΉ„μ§€ μ»¬λ ‰μ…μ—μ„ λ°°μ› λ“―μ΄ μλ°”μ¤ν¬λ¦½νΈ μ—”μ§„μ€ λ„λ” κ°€λ¥ν• κ°’μ„ λ©”λ¨λ¦¬μ— μ μ§€ν•λ‹¤.

μ•„λ μμ‹μ—μ„ λ°°μ—΄μ κ°μ²΄λ¥Ό μ¶”κ°€ν•κ³  κ°μ²΄μ— nullμ„ λ®μ–΄μ”μ›λ„ μ—¬μ „ν λ°°μ—΄μ„ ν†µν•΄ κ°μ²΄μ— μ ‘κ·Όν•  μ μλ‹¤.

```
let john = { name: "John" };

let array = [ john ];

john = null; // μ°Έμ΅°λ¥Ό nullλ΅ λ®μ–΄μ”€

// johnμ„ λ‚νƒ€λ‚΄λ” κ°μ²΄λ” λ°°μ—΄μ μ”μ†μ΄κΈ° λ•λ¬Έμ— κ°€λΉ„μ§€ μ»¬λ ‰ν„°μ λ€μƒμ΄ λμ§€ μ•μµλ‹λ‹¤.
// array[0]μ„ μ΄μ©ν•λ©΄ ν•΄λ‹Ή κ°μ²΄λ¥Ό μ–»λ” κ²ƒλ„ κ°€λ¥ν•©λ‹λ‹¤.
alert(JSON.stringify(array[0]));
```

mapμ—μ„ κ°μ²΄λ¥Ό ν‚¤λ΅ μ‚¬μ©ν• κ²½μ°μ—λ„ λ§μ°¬κ°€μ§€μ΄λ‹¤.

```
let john = { name: "John" };

let map = new Map();
map.set(john, "...");

john = null; // μ°Έμ΅°λ¥Ό nullλ΅ λ®μ–΄μ”€

// johnμ„ λ‚νƒ€λ‚΄λ” κ°μ²΄λ” λ§µ μ•μ— μ €μ¥λμ–΄μμµλ‹λ‹¤.
// map.keys()λ¥Ό μ΄μ©ν•λ©΄ ν•΄λ‹Ή κ°μ²΄λ¥Ό μ–»λ” κ²ƒλ„ κ°€λ¥ν•©λ‹λ‹¤.
for(let obj of map.keys()){
  alert(JSON.stringify(obj));
}

alert(map.size);
```

μ΄λ° λ¶€λ¶„μ—μ„ λ§µκ³Ό μ„ν¬λ§µμ€ μ°¨μ΄λ¥Ό λ³΄μΈλ‹¤.

-   μ„ν¬λ§µμ€ κ°μ²΄λ¥Ό ν‚¤λ΅ κ°–λ”λ‹¤.
-   μ„ν¬λ§µμ ν‚¤λ΅ μ‚¬μ©λ κ°μ²΄λ¥Ό μ°Έμ΅°ν•λ” κ²ƒμ΄ μ—†λ‹¤λ©΄ ν•΄λ‹Ή κ°μ²΄λ” μ‚­μ λλ‹¤.

**μ„λ“νν‹° λΌμ΄λΈλ¬λ¦¬μ™€ κ°™μ€ μ™Έλ¶€ μ½”λ“μ— μ†ν• κ°μ²΄λ¥Ό κ°€μ§€κ³  μ‘μ—…ν•λ‹¤κ³  ν•μ. μ΄λ•
κ°μ²΄μ— λ°μ΄ν„°λ¥Ό μ¶”κ°€ν•΄μ•Ό ν•λ” κ²½μ° λ°μ΄ν„°λ” κ°μ²΄κ°€ μ‚΄μ•„μλ” λ™μ•μ—λ§ μ ν¨ν•  λ• μ„ν¬λ§µμ„ μ‚¬μ©ν•λ‹¤.**

μ•„λλ” μ‚¬μ©μκ°€ κ°€κ²λ¥Ό λ°©λ¬Έν• νμλ¥Ό μ €μ¥ν•λ” μ½”λ“μ΄λ‹¤.

```
let visitsCountMap = new WeakMap(); // μ„ν¬λ§µμ— μ‚¬μ©μμ λ°©λ¬Έ νμλ¥Ό μ €μ¥ν•¨

// μ‚¬μ©μκ°€ λ°©λ¬Έν•λ©΄ λ°©λ¬Έ νμλ¥Ό λλ ¤μ¤λ‹λ‹¤.
function countUser(user) {
  let count = visitsCountMap.get(user) || 0;
  visitsCountMap.set(user, count + 1);
}

// π“ main.js
let john = { name: "John" };

countUser(john); // Johnμ λ°©λ¬Έ νμλ¥Ό μ¦κ°€μ‹ν‚µλ‹λ‹¤.

// Johnμ λ°©λ¬Έ νμλ¥Ό μ…€ ν•„μ”κ°€ μ—†μ–΄μ§€λ©΄ μ•„λμ™€ κ°™μ΄ johnμ„ nullλ΅ λ®μ–΄μ”λ‹λ‹¤.
john = null;
```

μ΄λ ‡κ² μ„ν¬λ§µμ„ μ‚¬μ©ν•λ©΄ johnμ„ nullλ΅ λ®μ–΄μ”μ°λ©΄ μλ™μΌλ΅ visitsCountMapμ—μ„ johnμ΄ μ‚¬λΌμ§„λ‹¤.

λ§μ•½ mapμ„ μ‚¬μ©ν–λ”λΌλ©΄ μ°λ¦° μ¶”κ°€λ΅ mapμ—μ„ johnμ„ ν‚¤λ΅ν•λ” μ»¬λ ‰μ…μ„ μ κ±°ν•λ” μ‘μ—…μ„ ν•΄μ¤μ•Ό ν•λ‹¤.

μ•„λλ” μ„ν¬μ…‹μ ν™μ©μΌλ΅ μ‚¬μ©μμ μ‚¬μ΄νΈ λ°©λ¬Έ μ—¬λ¶€λ¥Ό ν™•μΈν•λ‹¤.

```
let visitedSet = new WeakSet();

let john = { name: "John" };
let pete = { name: "Pete" };
let mary = { name: "Mary" };

visitedSet.add(john); // Johnμ΄ μ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•©λ‹λ‹¤.
visitedSet.add(pete); // μ΄μ–΄μ„ Peteκ°€ μ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•©λ‹λ‹¤.
visitedSet.add(john); // μ΄μ–΄μ„ Johnμ΄ λ‹¤μ‹ μ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•©λ‹λ‹¤.

// visitedSetμ—” λ‘ λ…μ μ‚¬μ©μκ°€ μ €μ¥λ  κ²λ‹λ‹¤.

// Johnμ λ°©λ¬Έ μ—¬λ¶€λ¥Ό ν™•μΈν•΄λ³΄κ² μµλ‹λ‹¤.
alert(visitedSet.has(john)); // true

// Maryμ λ°©λ¬Έ μ—¬λ¶€λ¥Ό ν™•μΈν•΄λ³΄κ² μµλ‹λ‹¤.
alert(visitedSet.has(mary)); // false

john = null;
```
